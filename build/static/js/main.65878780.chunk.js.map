{"version":3,"sources":["classes/Backend.js","components/useBackend.js","classes/JobServerAPI.js","components/AnnotatorAPIClient.js","App.js","index.js"],"names":["getToken","host","email","password","a","Axios","get","auth","username","response","data","token","Backend","this","api","create","baseURL","headers","Authorization","console","log","res","job_id","i","path","codingjobPackage","title","post","units","codebook","provenance","rules","unit_id","annotation","status","logIn","cookies","setCookies","setBackend","backend","init","JSON","stringify","LoginForm","useCookies","setLogout","setLogin","value","SignOut","Grid","textAlign","Column","Button","secondary","onClick","style","color","SignIn","useState","setHost","setEmail","setPassword","invalidPassword","setInvalidPassword","passwordLogin","emailError","match","useEffect","Header","icon","content","Segment","placeholder","attached","stackable","Row","Form","Input","name","label","onChange","e","d","length","iconPosition","autoFocus","error","Divider","columns","verticalAlign","circular","primary","fluid","width","height","vertical","type","disabled","useBackend","urlHost","JobServerAPI","where","getCodebook","getProgress","progress","success","getNext","n_coded","seek_forwards","Math","max","getUnit","postAnnotation","JobOverview","loginForm","getJobs","then","j","inverted","useJobServerBackend","jobId","jobServer","setJobServer","js","parseUrl","href","params","split","queries","reduce","obj","part","key","decodeURIComponent","url","URL","origin","pathname","slice","AnnotatorAPIClient","window","location","urlJobId","maxWidth","App","basename","ReactDOM","render","StrictMode","CookiesProvider","document","querySelector"],"mappings":"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","file":"static/js/main.65878780.chunk.js","sourcesContent":["import Axios from \"axios\";\n\nexport async function getToken(host, email, password) {\n  const response = await Axios.get(`${host}/token`, {\n    auth: { username: email, password: password },\n  });\n  return response.data.token;\n}\n\nclass Backend {\n  constructor(host, email, token) {\n    this.host = host;\n    this.email = email;\n    this.token = token;\n    this.api = Axios.create({\n      baseURL: host,\n      headers: { Authorization: `Bearer ${token}` },\n    });\n  }\n\n  async init() {\n    try {\n      await getToken();\n      console.log(this.email);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // GET\n  async getJobs() {\n    const res = await this.api.get(\"/codingjobs\");\n    return res.data;\n  }\n  async getToken() {\n    const res = await this.api.get(\"/token\");\n    return res.data;\n  }\n  async getCodebook(job_id) {\n    const res = await this.api.get(`/codingjob/${job_id}/codebook`);\n    return res.data;\n  }\n  async getProgress(job_id) {\n    const res = await this.api.get(`/codingjob/${job_id}/progress`);\n    return res.data;\n  }\n  async getUnit(job_id, i) {\n    let path = `/codingjob/${job_id}/unit`;\n    if (i !== null) path += `?index=${i}`;\n    const res = await this.api.get(path);\n    return res.data;\n  }\n  async getCodingjob(job_id) {\n    const res = await this.api.get(`/codingjob/${job_id}`);\n    return res.data;\n  }\n\n  // POST\n  postCodingjob(codingjobPackage, title) {\n    codingjobPackage.title = title;\n\n    return this.api.post(`/codingjob`, {\n      title: title,\n      units: codingjobPackage.units,\n      codebook: codingjobPackage.codebook,\n      provenance: codingjobPackage.provenance,\n      rules: codingjobPackage.rules,\n    });\n  }\n  postAnnotation(job_id, unit_id, annotation, status) {\n    const data = { annotation, status };\n    this.api.post(`/codingjob/${job_id}/unit/${unit_id}/annotation`, data);\n  }\n}\n\nexport default Backend;\n","import React, { useEffect, useState } from \"react\";\nimport Backend, { getToken } from \"classes/Backend\";\nimport { Header, Form, Button, Segment, Grid, Divider } from \"semantic-ui-react\";\nimport { useCookies } from \"react-cookie\";\n\nconst useBackend = (urlHost) => {\n  const [cookies, setCookies] = useCookies([\"backend\"]);\n  const [backend, setBackend] = useState(null);\n\n  useEffect(() => {\n    // First check for host in URL, if missing, check for host in cookies.\n    const host = urlHost || cookies?.backend?.host || null;\n\n    if (host && host !== backend?.host) setBackend(null); // reset backend if host changes\n    if (!cookies?.backend?.token) {\n      setBackend(null);\n      return;\n    }\n    if (backend || !host || !cookies?.backend?.token) return;\n    logIn(cookies, setCookies, setBackend);\n  }, [cookies, backend, urlHost, setCookies, setBackend]);\n\n  return [backend, <LoginForm host={urlHost || cookies?.backend?.host || null} />];\n};\n\nconst logIn = async (cookies, setCookies, setBackend) => {\n  const backend = new Backend(\n    cookies?.backend?.host,\n    cookies?.backend?.email,\n    cookies?.backend?.token\n  );\n  try {\n    // maybe add check for specific user later. For now just check if can get token\n    await backend.init();\n    setBackend(backend);\n  } catch (e) {\n    console.log(e);\n    setBackend(null);\n    setCookies(\"backend\", JSON.stringify({ ...backend, token: null }), { path: \"/\" });\n  }\n};\n\nexport const LoginForm = ({ host = null }) => {\n  const [cookies, setCookies] = useCookies([\"backend\"]);\n\n  const backend = cookies.backend || {\n    host: \"http://localhost:5000\",\n    email: \"test@user.com\",\n    token: null,\n  };\n\n  if (host) backend.host = host;\n\n  const setLogin = (value) => {\n    setCookies(\"backend\", JSON.stringify(value), { path: \"/\" });\n  };\n  const setLogout = () => {\n    setCookies(\"backend\", JSON.stringify({ ...backend, token: null }), { path: \"/\" });\n  };\n\n  if (backend.token) return <SignOut backend={backend} setLogout={setLogout} />;\n  return <SignIn backend={backend} setLogin={setLogin} />;\n};\n\nconst SignOut = ({ backend, setLogout }) => {\n  return (\n    <>\n      <Grid textAlign=\"center\">\n        <Grid.Column>\n          <Button secondary onClick={setLogout}>\n            Sign out from <span style={{ color: \"lightblue\" }}>{backend.email}</span>\n          </Button>\n        </Grid.Column>\n      </Grid>\n    </>\n  );\n};\n\nconst SignIn = ({ backend, setLogin }) => {\n  const [host, setHost] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [invalidPassword, setInvalidPassword] = useState(false);\n\n  const passwordLogin = async () => {\n    setPassword(\"\");\n    try {\n      const token = await getToken(host, email, password);\n      setLogin({ host, email, token });\n    } catch (e) {\n      setInvalidPassword(true);\n      console.log(e);\n    }\n  };\n\n  const emailError = !email.match(\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  );\n\n  useEffect(() => {\n    if (backend?.email) setEmail(backend.email);\n    if (backend?.host) setHost(backend.host);\n  }, [backend]);\n\n  return (\n    <>\n      <Header icon=\"user\" content=\"Register or sign in\" />\n\n      <Segment placeholder attached=\"bottom\">\n        <Grid stackable textAlign=\"center\">\n          <Grid.Row>\n            <Grid.Column>\n              <Form>\n                <Form.Input\n                  placeholder=\"Host\"\n                  name=\"host\"\n                  label=\"Host\"\n                  value={host}\n                  onChange={(e, d) => {\n                    if (d.value.length < 100) setHost(d.value);\n                  }}\n                  icon=\"home\"\n                  iconPosition=\"left\"\n                  autoFocus\n                />\n                <Form.Input\n                  placeholder=\"email adress\"\n                  error={emailError ? \"Please enter a valid email adress\" : false}\n                  name=\"email\"\n                  label=\"Email\"\n                  icon=\"mail\"\n                  iconPosition=\"left\"\n                  value={email}\n                  onChange={(e, d) => {\n                    if (d.value.length < 100) setEmail(d.value);\n                  }}\n                />\n              </Form>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        <Divider />\n        <Grid columns={2} textAlign=\"center\">\n          <Grid.Row verticalAlign=\"middle\">\n            <Grid.Column>\n              <Form>\n                <Button circular primary fluid style={{ width: \"7em\", height: \"7em\" }}>\n                  Login by email (not yet functional)\n                </Button>\n              </Form>\n            </Grid.Column>\n            <Divider vertical>Or</Divider>\n            <Grid.Column>\n              <Form>\n                <Form.Input\n                  placeholder=\"password\"\n                  name=\"password\"\n                  error={invalidPassword ? \"Invalid password for this host & email\" : false}\n                  label=\"Password\"\n                  type=\"password\"\n                  icon=\"lock\"\n                  iconPosition=\"left\"\n                  value={password}\n                  onChange={(e, d) => {\n                    setInvalidPassword(false);\n                    setPassword(d.value);\n                  }}\n                />\n                <Button disabled={password.length === 0} primary fluid onClick={passwordLogin}>\n                  Sign in\n                </Button>\n              </Form>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </Segment>\n    </>\n  );\n};\n\nexport default useBackend;\n","class JobServerAPI {\n  constructor(backend, job_id) {\n    this.backend = backend;\n    this.job_id = job_id;\n    this.where = \"remote\";\n  }\n\n  async init() {\n    try {\n      this.codebook = await this.backend.getCodebook(this.job_id);\n      this.progress = await this.backend.getProgress(this.job_id);\n    } catch (e) {\n      console.log(e);\n      this.success = false;\n      return;\n    }\n    this.success = true;\n  }\n\n  async getUnit(i) {\n    const getNext = i >= this.progress.n_coded && !this.progress.seek_forwards;\n    this.progress.n_coded = Math.max(i, this.progress.n_coded);\n    return await this.backend.getUnit(this.job_id, getNext ? null : i);\n  }\n\n  postAnnotations(unit_id, annotation, status) {\n    this.backend.postAnnotation(this.job_id, unit_id, annotation, status);\n  }\n}\n\nexport default JobServerAPI;\n","import React, { useState, useEffect } from \"react\";\nimport Annotator from \"react-ccs-annotator\";\nimport { Grid, Header } from \"semantic-ui-react\";\nimport useBackend from \"./useBackend\";\nimport JobServerAPI from \"classes/JobServerAPI\";\n\n//   http://localhost:3000/CCS_annotator#/annotator?url=http://localhost:5000/codingjob/25\n\nconst AnnotatorAPIClient = () => {\n  const [urlHost, urlJobId] = parseUrl(window.location.href);\n  const [backend, loginForm] = useBackend(urlHost);\n  const jobServer = useJobServerBackend(backend, urlJobId);\n\n  if (!backend)\n    // If backend isn't connected, show login screen\n    // If the url contained a host, this field is fixed\n    return (\n      <Grid inverted textAlign=\"center\" style={{ height: \"100vh\" }} verticalAlign=\"middle\">\n        <Grid.Column style={{ maxWidth: \"500px\" }}>{loginForm}</Grid.Column>\n      </Grid>\n    );\n\n  if (!jobServer) {\n    // if backend is connected, but there is no jobServer (because no job_id was passed in the url)\n    // show a screen with some relevant info for the user on this host. Like current / new jobs\n    return <JobOverview backend={backend} loginForm={loginForm} />;\n  }\n\n  return <Annotator jobServer={jobServer} />;\n};\n\nconst JobOverview = ({ backend, loginForm }) => {\n  backend.getJobs().then((j) => console.log(j));\n  return (\n    <Grid inverted textAlign=\"center\" style={{ height: \"100vh\" }} verticalAlign=\"middle\">\n      <Grid.Row>\n        <Grid.Column>\n          <Header>{backend.host}</Header>\n          {loginForm}\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row>test</Grid.Row>\n    </Grid>\n  );\n};\n\nconst useJobServerBackend = (backend, jobId) => {\n  const [jobServer, setJobServer] = useState(null);\n\n  useEffect(() => {\n    if (!backend || !jobId) {\n      setJobServer(null);\n      return;\n    }\n    const js = new JobServerAPI(backend, jobId);\n    js.init().then(() => setJobServer(js)); // add a check for if job_id is invalid\n  }, [backend, jobId]);\n\n  return jobServer;\n};\n\n/**\n * look for the query parameter url  (?url = ...)\n  /if it exists, return the origin/host and the last part of the path (which should be the job_id)\n * @param {*} href from window.location.href\n * @returns \n */\nconst parseUrl = (href) => {\n  const params = href.split(\"?\")?.[1];\n  if (!params) return [null, null];\n\n  const parts = params.split(\"&\");\n  const queries = parts.reduce((obj, part) => {\n    const [key, value] = part.split(\"=\");\n    obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    return obj;\n  }, {});\n  if (!queries.url) return [null, null];\n\n  const url = new URL(queries.url);\n  return [url.origin, url.pathname.split(\"/\").slice(-1)[0]];\n};\n\nexport default AnnotatorAPIClient;\n","import React from \"react\";\n\n// Main pages. Use below in items to include in header menu\nimport { HashRouter } from \"react-router-dom\";\nimport AnnotatorAPIClient from \"components/AnnotatorAPIClient\";\n\nconst App = () => {\n  return (\n    <HashRouter basename=\"/\">\n      <div style={{ height: \"100vh\", width: \"100vw\" }}>\n        <AnnotatorAPIClient />\n      </div>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import \"semantic-ui-css/semantic.min.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"App\";\nimport { CookiesProvider } from \"react-cookie\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <CookiesProvider>\n      <App />\n    </CookiesProvider>\n  </React.StrictMode>,\n  document.querySelector(\"#root\")\n);\n"],"sourceRoot":""}